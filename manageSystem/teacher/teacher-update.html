<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="../favicon.ico" >
<link rel="Shortcut Icon" href="../favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="../static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="../lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script><![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>修改教师信息</title>
<link href="../lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
<style type="text/css">
	#tmpimg{
		width: 200px;
	}
</style>
</head>
<body>
<div class="page-container">
    <div class="form form-horizontal" id="form-article-add">
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>教师编号：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="" id="userID" name="">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>姓名：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="" id="userName" name="">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>密码：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="" id="userPass" name="">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>所属教研室：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                    <select name="" class="select" id='department'>
                        <!-- <option value="请选择" disabled="disabled" selected>请选择</option> -->
                        <option value="学院领导">学院领导</option>
                        <option value="代数与几何教研室">代数与几何教研室</option>
                        <option value="应用统计教研室">应用统计教研室</option>
                        <option value="公共数学教研室">公共数学教研室</option>
                        <option value="信息与计算科学教研室">信息与计算科学教研室</option>
                        <option value="分析教研室">分析教研室</option>
                        <option value="数学教育教研室">数学教育教研室</option>
                        <option value="应用统计教研室">应用统计教研室</option>
                        <option value="教辅人员">教辅人员</option>
                        <option value="行政人员">行政人员</option>
                    </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">性别：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='gender'>
                    <option value="男">男</option>
                    <option value="女">女</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">出生年月：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="日期格式为：2019-5" id="birthday" name="">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">入校时间：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="日期格式为：2019-5" id="enteTime" name="">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">任职状态：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='asState'>
                    <option value="在职">在职</option>
                    <option value="离职">离职</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">单位号：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='unitNumber'>
                    <option value="106">106</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">单位名称：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='unitName'>
                    <option value="数学与统计学院">数学与统计学院</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">学历：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='education'>
                    <option value="大学本科">大学本科</option>
                    <option value="硕士研究生">硕士研究生</option>
                    <option value="博士研究生">博士研究生</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">最高学位：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='highestDegree'>
                    <option value="无学位">无学位</option>
                    <option value="学士">学士</option>
                    <option value="硕士">硕士</option>
                    <option value="博士">博士</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">学缘：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='learnEdge'>
                    <option value="本校">本校</option>
                    <option value="外校（境内）">外校（境内）</option>
                    <option value="外校（境外）">外校（境外）</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>专业技术职称：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='technicalTitles'>
                    <option value="未评级">未评级</option>
                    <option value="助教">助教</option>
                    <option value="讲师">讲师</option>
                    <option value="副教授">副教授</option>
                    <option value="教授">教授</option>
                    <option value="其他中级">其他中级</option>
                    <option value="其他副高级">其他副高级</option>
                    <option value="其他高级">其他高级</option>
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">学科类别：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='subjectCategory'>
                    <option value="数学">数学</option>
                    <option value="计算机科学与技术">计算机科学与技术</option>
                    <option value="音乐与舞蹈学">音乐与舞蹈学</option>
                    <option value="教育学">教育学</option>
                    <option value="应用经济学">应用经济学</option>
                    <option value="马克思主义理论">马克思主义理论</option>
                    <option value="新闻传播学">新闻传播学</option>
                    <option value="统计学">统计学</option>
                    <option value="系统科学">系统科学</option>
                    <option value="力学">力学</option>
                    <option value="机械">机械</option>
                    <option value="设计">设计</option>
                    <option value="应用数学">应用数学</option>
                    <!-- <option value="应用数学">系统科学</option>
                    <option value="应用数学">力学</option> -->
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">政治面貌：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='politicsStatus'>
                    <option value="无党派民主人士">无党派民主人士</option>
                    <option value="群众">群众</option>
                    <option value="中共党员">中共党员</option>
                    <option value="民进会员">民进会员</option>
                </select>
                </span>
            </div>
        </div>
        <!-- 
            汉族、满族、蒙古族、回族、藏族、维吾尔族、苗族、彝族、壮族、布依族、侗族、瑶族、
            白族、土家族、哈尼族、哈萨克族、傣族、黎族、傈僳族、佤族、畲族、高山族、拉祜族、
            水族、东乡族、纳西族、景颇族、柯尔克孜族、土族、达斡尔族、仫佬族、羌族、布朗族、
            撒拉族、毛南族、仡佬族、锡伯族、阿昌族、普米族、朝鲜族、塔吉克族、怒族、乌孜别克族、
            俄罗斯族、鄂温克族、德昂族、保安族、裕固族、京族、塔塔尔族、独龙族、鄂伦春族、赫哲族、
            门巴族、珞巴族、基诺族
            -->
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-2">民族：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box">
                <select name="" class="select" id='national'>
                    <option value="请选择" disabled selected>请选择</option>
                    <option value="汉族">汉族</option>
                    <option value="壮族">壮族</option>
                    <option value="满族">满族</option>
                    <option value="蒙古族">蒙古族</option>
                    <option value="回族">回族</option>
                    <option value="藏族">藏族</option>
                    <option value="维吾尔族">维吾尔族</option>
                    <option value="苗族">苗族</option>
                </select>
                </span>
            </div>
        </div>

        <div class="row cl">
            <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
                <button id="addbtn" class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 提交</button>
                <button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
            </div>
        </div>
    </div>
</div>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script> 
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/jquery.validate.js"></script> 
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/validate-methods.js"></script> 
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/messages_zh.js"></script> 
<script type="text/javascript" src="../static/h-ui/js/H-ui.js"></script> 
<script type="text/javascript" src="../static/h-ui.admin/js/H-ui.admin.page.js"></script> 

<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="../lib/webuploader/0.1.5/webuploader.min.js"></script> 
<script type="text/javascript">
$(function(){

    // 初始化
    init();
    var adminInfo;
    function init(){
        if(!window.sessionStorage.getItem("loginStatus")){
            layer.msg('身份验证失败，请重新登录',{time:1000});
            location.href='../login.html'
        // }else{
        //     adminInfo=JSON.parse(window.localStorage.getItem("adminInfo"))
        //     $('#admin').html(adminInfo.userName)
        }

    }

    let OL_Action_Root="http://localhost:8000"
    //获取当前教师相关信息
    getInfoById();
    function getInfoById(){
        //获取id
        var id= window.localStorage.getItem('updateid');
        $.get(OL_Action_Root+'/api/userInfo/findById',{id:id},function(res){
            console.log(res.data[0].department);
            if(res.msg==='success') {
                $('#userID').val(res.data[0].userID);
                $('#userName').val(res.data[0].userName);
                $('#userPass').val(res.data[0].userPass);
                $('#department').val(res.data[0].department);
                $('#gender').val(res.data[0].gender);
                $('#birthday').val(res.data[0].birthday);
                $('#enteTime').val(res.data[0].enteTime);
                $('#asState').val(res.data[0].asState);
                $('#unitNumber').val(res.data[0].unitNumber);
                $('#unitName').val(res.data[0].unitName);
                $('#education').val(res.data[0].education);
                $('#highestDegree').val(res.data[0].highestDegree);
                $('#learnEdge').val(res.data[0].learnEdge);
                $('#technicalTitles').val(res.data[0].technicalTitles);
                $('#subjectCategory').val(res.data[0].subjectCategory);
                $('#politicsStatus').val(res.data[0].politicsStatus);
                $('#national').val(res.data[0].national);
            } else {
                layer.msg('很遗憾，找不到您要的数据!',{icon:1,time:1000});
            }
        })
    }
	
    //修改教师信息操作
    function addTeacher(){
        var teacherInfo = {
            userID: window.localStorage.getItem('updateid'),
            userName: $('#userName').val(),
            userPass: $('#userPass').val(), 
            department: $('#department').val(), 
            gender: $('#gender').val(), 
            birthday: $('#birthday').val(), 
            enteTime: $('#enteTime').val(), 
            asState: $('#asState').val(), 
            unitNumber: $('#unitNumber').val(), 
            unitName: $('#unitName').val(), 
            education: $('#education').val(), 
            highestDegree: $('#highestDegree').val(), 
            learnEdge: $('#learnEdge').val(), 
            technicalTitles: $('#technicalTitles').val(), 
            subjectCategory: $('#subjectCategory').val(), 
            politicsStatus: $('#politicsStatus').val(), 
            national: $('#national').val(),  
        }
        $.post(OL_Action_Root+"/api/userInfo/updateTeacher",teacherInfo,function(res){
            if (res.msg==='success') {
                parent.layer.msg('修改成功!',{icon:1,time:1000,end:parent.$('.btn-success').click()});
                var index = parent.layer.getFrameIndex(window.name);
                parent.layer.close(index);
            }else{
            	alert(res.msg)
            }
        })
         
        

    }
    $('#addbtn').on('click',addTeacher)
});

</script>
</body>
</html>